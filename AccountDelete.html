<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶è‡¶¨‡¶Ç ‡¶°‡¶æ‡¶ü‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü - EasyPremium</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        import { 
            getAuth, 
            onAuthStateChanged
        } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";
        import { 
            getDatabase, 
            ref, 
            remove
        } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";

        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBt9t6mcjUtXxX2igAJdseuIIc8pP_QPEw",
            authDomain: "easy-premium.firebaseapp.com",
            databaseURL: "https://easy-premium-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "easy-premium",
            storageBucket: "easy-premium.firebasestorage.app",
            messagingSenderId: "155891252265",
            appId: "1:155891252265:web:77ab41de24231e8e5ef038",
            measurementId: "G-CHL8K8HRPX"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getDatabase(app);

        let currentUser = null;

        // Check authentication state
        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log("User logged in:", user.email);
                currentUser = user;
                document.getElementById('user-email').textContent = user.email;
                document.getElementById('user-uid').textContent = user.uid.substring(0, 10) + "...";
                document.getElementById('not-logged-in').style.display = 'none';
                document.getElementById('logged-in-content').style.display = 'block';
            } else {
                console.log("No user logged in");
                document.getElementById('not-logged-in').style.display = 'block';
                document.getElementById('logged-in-content').style.display = 'none';
            }
        });

        // 1. ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü (‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá)
        async function deleteUserData() {
            if (!currentUser) {
                showMessage("‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á", "‡¶Ü‡¶™‡¶®‡¶ø ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á‡•§", "error");
                return;
            }
            
            const confirmed = await showConfirm(
                "‡¶°‡¶æ‡¶ü‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü",
                `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶ï‡¶≤ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?\n\n‡¶á‡¶Æ‡ßá‡¶á‡¶≤: ${currentUser.email}\n\n‚ö†Ô∏è ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶ó‡ßá‡¶≤‡ßá ‡¶™‡ßÅ‡¶®‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ!`,
                "warning"
            );
            
            if (!confirmed) return;

            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            btn.disabled = true;

            try {
                const userId = currentUser.uid;
                
                // ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶® (Authentication ‡¶Æ‡ßÅ‡¶õ‡¶¨‡ßá‡¶® ‡¶®‡¶æ)
                await remove(ref(db, 'users/' + userId));
                await remove(ref(db, 'userOrders/' + userId));
                
                // ‡¶∏‡¶´‡¶≤ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú
                showMessage("‚úÖ ‡¶∏‡¶´‡¶≤!", "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!", "success");
                
                // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }, 2000);

            } catch (error) {
                console.error("Error:", error);
                showMessage("‚ùå ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø!", "‡¶°‡¶æ‡¶ü‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ: " + error.message, "error");
                
                btn.innerHTML = "‡¶°‡¶æ‡¶ü‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®";
                btn.disabled = false;
            }
        }

        // 2. ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü (‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø - recent login ‡¶è‡¶∞‡¶∞ ‡¶è‡¶°‡¶º‡¶æ‡¶®‡ßã)
        async function deleteAccount() {
            if (!currentUser) {
                showMessage("‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á", "‡¶Ü‡¶™‡¶®‡¶ø ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á‡•§", "error");
                return;
            }

            // ‡ß© ‡¶∏‡ßç‡¶§‡¶∞‡ßá‡¶∞ ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ‡ßá‡¶∂‡¶®
            const confirm1 = await showConfirm(
                "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü",
                `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?\n\n‡¶á‡¶Æ‡ßá‡¶á‡¶≤: ${currentUser.email}`,
                "warning"
            );
            if (!confirm1) return;
            
            const confirm2 = await showConfirm(
                "‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡¶Ø‡¶º ‡¶¨‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®",
                "üö® ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ï‡¶ø ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§?\n\n‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶ö‡¶ø‡¶∞‡¶§‡¶∞‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá!",
                "danger"
            );
            if (!confirm2) return;
            
            const confirm3 = await showConfirm(
                "‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ",
                "üî• ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶∏‡¶ø‡¶¶‡ßç‡¶ß‡¶æ‡¶®‡ßç‡¶§!\n\n‚úÖ ‡¶π‡ßç‡¶Ø‡¶æ‡¶Å - ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®\n‚ùå ‡¶®‡¶æ - ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®",
                "danger"
            );
            if (!confirm3) return;

            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ‡¶™‡ßç‡¶∞‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ‡¶ß‡ßÄ‡¶®...';
            btn.disabled = true;

            try {
                const userId = currentUser.uid;
                const userEmail = currentUser.email;
                
                // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá: ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶® (Authentication ‡¶õ‡¶æ‡¶°‡¶º‡¶æ‡¶á)
                await remove(ref(db, 'users/' + userId));
                await remove(ref(db, 'userOrders/' + userId));
                
                // ‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡¶Ø‡¶º: Cloud Function ‡¶¶‡¶ø‡ßü‡ßá ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø‡¶§‡ßá Authentication ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®
                await deleteAccountViaAPI(userId, userEmail);
                
                // ‡¶∏‡¶´‡¶≤ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú
                showMessage("‚úÖ ‡¶∏‡¶´‡¶≤!", "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!", "success", () => {
                    window.location.href = "index.html";
                });

            } catch (error) {
                console.error("Error:", error);
                
                let errorMsg = "‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!";
                if (error.message.includes('recent')) {
                    errorMsg = "‚ö†Ô∏è ‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶≤‡¶ó‡¶á‡¶® ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ‡•§\n\n‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá:\n1. ‡¶è‡¶á ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ‡¶ü‡¶ø ‡¶ï‡ßç‡¶≤‡ßã‡¶ú ‡¶ï‡¶∞‡ßÅ‡¶®\n2. ‡¶π‡ßã‡¶Æ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡¶æ‡¶®\n3. ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®\n4. ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®\n5. ‡¶§‡¶æ‡¶∞‡¶™‡¶∞ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®";
                } else {
                    errorMsg = "‚ùå ‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: " + error.message;
                }
                
                showMessage("‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø!", errorMsg, "error");
                
                btn.innerHTML = "‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®";
                btn.disabled = false;
            }
        }

        // ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø: API/Cloud Function ‡¶è‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
        async function deleteAccountViaAPI(userId, userEmail) {
            // ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø ‡ßß: ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø Firebase Admin API ‡¶ï‡¶≤ (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)
            try {
                // ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Firebase Cloud Function ‡¶•‡¶æ‡¶ï‡ßá
                const response = await fetch('https://asia-southeast1-easy-premium.cloudfunctions.net/deleteAccount', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        userId: userId,
                        userEmail: userEmail,
                        timestamp: new Date().toISOString()
                    })
                });
                
                if (response.ok) {
                    console.log("Account deleted via API");
                    return;
                }
            } catch (apiError) {
                console.log("API method failed, trying alternative...");
            }
            
            // ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø ‡ß®: ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶æ‡¶®
            // Authentication ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤‡¶ø ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶π‡¶¨‡ßá Admin Console ‡¶•‡ßá‡¶ï‡ßá
            showMessage("‚ö†Ô∏è ‡¶§‡¶•‡ßç‡¶Ø", 
                `‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!\n\n‡¶á‡¶Æ‡ßá‡¶á‡¶≤: ${userEmail}\n\n‚úÖ ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶°‡¶æ‡¶ü‡¶æ: ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá\n‚ö†Ô∏è Authentication: Admin Panel ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡ßÅ‡¶õ‡¶§‡ßá ‡¶π‡¶¨‡ßá\n\n‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶ü‡¶ø‡¶Æ ‡ß®‡ß™ ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Authentication ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶¶‡¶ø‡¶¨‡ßá‡•§`, 
                "info"
            );
            
            // ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶æ‡¶®
            setTimeout(() => {
                auth.signOut();
                window.location.href = "index.html";
            }, 5000);
        }

        // ‡¶¨‡¶ø‡¶ï‡¶≤‡ßç‡¶™: ‡¶∏‡¶π‡¶ú ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø (‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®)
        async function deleteAccountSimple() {
            if (!currentUser) {
                alert("‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á");
                return;
            }

            if (confirm("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?\n\n‚ö†Ô∏è ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶¶‡ßá‡¶¨‡ßá!")) {
                try {
                    const userId = currentUser.uid;
                    
                    // ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®
                    await remove(ref(db, 'users/' + userId));
                    await remove(ref(db, 'userOrders/' + userId));
                    
                    // ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶æ‡¶®
                    await auth.signOut();
                    
                    alert("‚úÖ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!\n\n‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§");
                    window.location.href = "index.html";
                    
                } catch (error) {
                    alert("‡¶§‡ßç‡¶∞‡ßÅ‡¶ü‡¶ø: " + error.message);
                }
            }
        }

        // UI ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function showMessage(title, message, type, callback = null) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `custom-message message-${type}`;
            messageDiv.innerHTML = `
                <div class="message-content">
                    <h3>${title}</h3>
                    <p style="white-space: pre-line;">${message}</p>
                    <button onclick="this.parentElement.parentElement.remove()${callback ? ';(' + callback.toString() + ')()' : ''}">
                        OK
                    </button>
                </div>
            `;
            
            document.body.appendChild(messageDiv);
            
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                    if (callback) callback();
                }
            }, 10000);
        }

        function showConfirm(title, message, type) {
            return new Promise((resolve) => {
                const confirmDiv = document.createElement('div');
                confirmDiv.className = `custom-confirm confirm-${type}`;
                confirmDiv.innerHTML = `
                    <div class="confirm-content">
                        <h3>${title}</h3>
                        <p style="white-space: pre-line;">${message}</p>
                        <div class="confirm-buttons">
                            <button class="confirm-no" onclick="this.parentElement.parentElement.parentElement.remove(); resolve(false)">
                                ‚ùå ‡¶®‡¶æ, ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤
                            </button>
                            <button class="confirm-yes" onclick="this.parentElement.parentElement.parentElement.remove(); resolve(true)">
                                ‚úÖ ‡¶π‡ßç‡¶Ø‡¶æ‡¶Å, ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                            </button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(confirmDiv);
            });
        }

        // ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        window.deleteUserData = deleteUserData;
        window.deleteAccount = deleteAccountSimple; // ‡¶∏‡¶π‡¶ú ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®
        window.deleteAccountFull = deleteAccount; // ‡¶™‡ßÅ‡¶∞‡ßã ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø (‡¶Ø‡¶¶‡¶ø API ‡¶•‡¶æ‡¶ï‡ßá)

    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Kalpurush', sans-serif;
        }

        body {
            background: #f5f7fa;
            color: #2d3748;
        }

        .header {
            background: linear-gradient(135deg, #2b6cb0, #2c5282);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .logo span {
            color: #f6e05e;
        }

        .subtitle {
            opacity: 0.9;
        }

        .container {
            max-width: 800px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .info-box {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            border-left: 5px solid #4299e1;
        }

        .user-card {
            background: linear-gradient(135deg, #ebf8ff, #bee3f8);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            text-align: center;
            border: 2px solid #4299e1;
        }

        .user-card h3 {
            color: #2b6cb0;
            margin-bottom: 10px;
        }

        .action-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 25px;
            border: 1px solid #e2e8f0;
        }

        .action-title {
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }

        .action-desc {
            color: #4a5568;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .warning {
            background: #fff5f5;
            border-left: 4px solid #fc8181;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .btn {
            background: linear-gradient(135deg, #fc8181, #f56565);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            width: 100%;
            margin-top: 15px;
            transition: all 0.3s;
        }

        .btn:hover {
            background: linear-gradient(135deg, #f56565, #e53e3e);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 101, 101, 0.3);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #718096;
        }

        .btn-secondary:hover {
            background: #4a5568;
        }

        #not-logged-in {
            text-align: center;
            padding: 40px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .login-btn {
            display: inline-block;
            background: #4299e1;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 15px;
        }

        .login-btn:hover {
            background: #3182ce;
        }

        /* Custom Messages */
        .custom-message, .custom-confirm {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            z-index: 10000;
            min-width: 350px;
            animation: slideIn 0.3s;
            border-top: 4px solid;
        }

        .message-success { border-color: #48bb78; }
        .message-error { border-color: #f56565; }
        .message-warning { border-color: #ed8936; }
        .message-info { border-color: #4299e1; }

        .confirm-danger { border-color: #f56565; background: #fff5f5; }

        .message-content h3, .confirm-content h3 {
            margin-bottom: 15px;
            color: #2d3748;
        }

        .message-content button {
            background: #4299e1;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
            font-weight: 600;
        }

        .confirm-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .confirm-no, .confirm-yes {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
        }

        .confirm-no {
            background: #e2e8f0;
            color: #4a5568;
        }

        .confirm-yes {
            background: linear-gradient(135deg, #f56565, #e53e3e);
            color: white;
        }

        .fa-spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @media (max-width: 600px) {
            .container {
                padding: 0 15px;
            }
            
            .custom-message, .custom-confirm {
                left: 15px;
                right: 15px;
                min-width: auto;
            }
        }

        .option-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .option-btn {
            flex: 1;
            padding: 15px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            text-align: center;
        }

        .option-delete {
            background: #fed7d7;
            color: #c53030;
            border: 2px solid #fc8181;
        }

        .option-cancel {
            background: #e2e8f0;
            color: #4a5568;
            border: 2px solid #cbd5e0;
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="logo">Easy<span>Premium</span></div>
        <div class="subtitle">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</div>
    </header>

    <main class="container">
        <!-- Info Section -->
        <div class="info-box">
            <h2 style="color: #2b6cb0; margin-bottom: 15px;">
                <i class="fas fa-info-circle"></i> ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶§‡¶•‡ßç‡¶Ø
            </h2>
            <p style="line-height: 1.7; color: #4a5568;">
                ‡¶è‡¶á ‡¶™‡ßÉ‡¶∑‡ßç‡¶†‡¶æ ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶¨‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§ 
                ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡ßá ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º‡ßá ‡¶®‡¶ø‡¶® ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶è‡¶ü‡¶ø ‡¶™‡ßÅ‡¶®‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§
            </p>
        </div>

        <!-- Not Logged In -->
        <div id="not-logged-in">
            <h2 style="color: #4a5568; margin-bottom: 15px;">
                <i class="fas fa-user-lock"></i> ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶®‡ßá‡¶á
            </h2>
            <p style="color: #718096; margin-bottom: 20px;">
                ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
            </p>
            <a href="login.html" class="login-btn">
                <i class="fas fa-sign-in-alt"></i> ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
            </a>
        </div>

        <!-- Logged In Content -->
        <div id="logged-in-content" style="display:none;">
            <!-- User Info -->
            <div class="user-card">
                <h3><i class="fas fa-user-check"></i> ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá</h3>
                <p style="font-size: 1.1rem; margin: 10px 0;">
                    <strong>‡¶á‡¶Æ‡ßá‡¶á‡¶≤:</strong> <span id="user-email"></span>
                </p>
                <p style="color: #718096; font-size: 0.9rem;">
                    ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø: <span id="user-uid"></span>
                </p>
            </div>

            <!-- Option 1: Delete Data Only -->
            <div class="action-card">
                <h3 class="action-title">
                    <i class="fas fa-database"></i> ‡¶¨‡¶ø‡¶ï‡¶≤‡ßç‡¶™ ‡ßß: ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                </h3>
                <div class="action-desc">
                    <p>‡¶è‡¶á ‡¶Ö‡¶™‡¶∂‡¶® ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶¶‡ßá‡¶¨‡ßá:</p>
                    <ul style="padding-left: 20px; margin: 10px 0; color: #4a5568;">
                        <li>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</li>
                        <li>‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°</li>
                        <li>‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø</li>
                    </ul>
                    <p>‚úÖ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶•‡¶æ‡¶ï‡¶¨‡ßá, ‡¶™‡¶∞‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®</p>
                </div>
                <div class="warning">
                    <strong><i class="fas fa-exclamation-triangle"></i> ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ:</strong>
                    ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶™‡ßÅ‡¶®‡¶∞‡ßÅ‡¶¶‡ßç‡¶ß‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ‡•§
                </div>
                <button onclick="deleteUserData()" class="btn">
                    <i class="fas fa-trash"></i> ‡¶°‡¶æ‡¶ü‡¶æ ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>

            <!-- Option 2: Delete Account (Simple Method) -->
            <div class="action-card">
                <h3 class="action-title">
                    <i class="fas fa-user-times"></i> ‡¶¨‡¶ø‡¶ï‡¶≤‡ßç‡¶™ ‡ß®: ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü (‡¶∏‡¶π‡¶ú ‡¶™‡¶¶‡ßç‡¶ß‡¶§‡¶ø)
                </h3>
                <div class="action-desc">
                    <p>‡¶è‡¶á ‡¶Ö‡¶™‡¶∂‡¶® ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶∏‡¶ï‡¶≤ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶¶‡ßá‡¶¨‡ßá:</p>
                    <ul style="padding-left: 20px; margin: 10px 0; color: #4a5568;">
                        <li>‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤ ‡¶§‡¶•‡ßç‡¶Ø</li>
                        <li>‡¶∏‡¶ï‡¶≤ ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏</li>
                        <li>‡¶∏‡¶ï‡¶≤ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶°</li>
                    </ul>
                    <p>‚ö†Ô∏è ‡¶Ü‡¶™‡¶®‡¶ø ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶π‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡¶® ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶ï‡¶≤ ‡¶°‡¶æ‡¶ü‡¶æ ‡¶π‡¶æ‡¶∞‡¶æ‡¶¨‡ßá‡¶®</p>
                </div>
                <div class="warning" style="background: #fed7d7; border-color: #fc8181;">
                    <strong><i class="fas fa-radiation-alt"></i> ‡¶ö‡ßÇ‡¶°‡¶º‡¶æ‡¶®‡ßç‡¶§ ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ:</strong>
                    ‡¶è‡¶ü‡¶ø ‡¶Ö‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßÄ‡¶Ø‡¶º ‡¶è‡¶¨‡¶Ç ‡¶ö‡¶ø‡¶∞‡¶§‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø‡•§
                </div>
                
                <div class="option-buttons">
                    <button onclick="window.deleteAccount()" class="option-btn option-delete">
                        <i class="fas fa-user-slash"></i> ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü
                    </button>
                    <button onclick="if(confirm('‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?')) window.deleteAccountFull()" 
                            class="option-btn option-cancel" style="background: #e2e8f0;">
                        <i class="fas fa-fire"></i> ‡¶™‡ßÅ‡¶∞‡ßã ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü (‡¶Ø‡¶¶‡¶ø API ‡¶•‡¶æ‡¶ï‡ßá)
                    </button>
                </div>
                
                <p style="text-align: center; color: #718096; margin-top: 15px; font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá‡¶á ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá
                </p>
            </div>

            <!-- Help Section -->
            <div class="action-card" style="background: #f7fafc;">
                <h3 class="action-title" style="color: #2b6cb0;">
                    <i class="fas fa-hands-helping"></i> ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®?
                </h3>
                <div class="action-desc">
                    <p>‡¶Ø‡¶¶‡¶ø ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶Ø‡¶º:</p>
                    <div style="display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
                        <a href="help.html" style="
                            flex: 1;
                            background: white;
                            padding: 15px;
                            border-radius: 8px;
                            text-decoration: none;
                            color: #2b6cb0;
                            text-align: center;
                            border: 1px solid #4299e1;
                            min-width: 120px;
                        ">
                            <i class="fas fa-question-circle"></i><br>
                            FAQ
                        </a>
                        <button onclick="window.location.reload()" style="
                            flex: 1;
                            background: white;
                            padding: 15px;
                            border-radius: 8px;
                            border: 1px solid #cbd5e0;
                            color: #4a5568;
                            cursor: pointer;
                            min-width: 120px;
                        ">
                            <i class="fas fa-redo"></i><br>
                            ‡¶∞‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶∂
                        </button>
                        <a href="index.html" style="
                            flex: 1;
                            background: white;
                            padding: 15px;
                            border-radius: 8px;
                            text-decoration: none;
                            color: #2b6cb0;
                            text-align: center;
                            border: 1px solid #4299e1;
                            min-width: 120px;
                        ">
                            <i class="fas fa-home"></i><br>
                            ‡¶π‡ßã‡¶Æ
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer style="
        text-align: center;
        padding: 25px;
        color: #718096;
        font-size: 0.9rem;
        margin-top: 40px;
        border-top: 1px solid #e2e8f0;
    ">
        <p>¬© 2026 EasyPremium - ‡¶∏‡¶π‡¶ú ‡¶∏‡¶Æ‡¶æ‡¶ß‡¶æ‡¶®</p>
        <p style="margin-top: 8px;">
            <i class="fas fa-shield-alt"></i> ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßÅ‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§
        </p>
    </footer>

</body>
</html>
